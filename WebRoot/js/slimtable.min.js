(function() {
	$(".articNavItem").click(function() {// 导航栏点击加载表格数据
		var Index = $(this).index();
		var tableId = "#table" + Index;
		var pageDivId = "#tablePage" + Index;

		switch (Index) {
		case 1:
			$.ajax({
				type : "GET",
				url : "getDCInfo.action",
				dataType : "json",
				success : function(data) {
					tableSuccess(tableId, pageDivId, data);
				}
			})
			break;

		case 3:
			$.ajax({
				type : "GET",
				url : "getIPCInfo.action",
				dataType : "json",
				success : function(data) {
//					tableSuccess(tableId, pageDivId, data);
					alert("sasa");
//					data.errMsg;
				},
				error : function(data){
					alert("没有权限");
				}
			})
			break;
		case 4:
			$.ajax({
				type : "GET",
				url : "getNVRInfo.action",
				dataType : "json",
				success : function(data) {
					tableSuccess(tableId, pageDivId, data);
				}
			})
			break;
		case 5:
			$.ajax({
				type : "GET",
				url : url,
				dataType : "json",
				success : function(data) {
					tableSuccess(tableId, pageDivId, data);
				}
			})
			break;
		case 6:
			$.ajax({
				type : "GET",
				url : url,
				dataType : "json",
				success : function(data) {
					tableSuccess(tableId, pageDivId, data);
				}
			})
			break;
		case 7:
			$.ajax({
				type : "GET",
				url : url,
				dataType : "json",
				success : function(data) {
					tableSuccess(tableId, pageDivId, data);
				}
			})
			break;
		default:
			break;
		}
		;
	});

	// tableId所用的table的id，pageDivId为tablePage的id，data为ajax加载之后的数组
	function tableSuccess(a, b, c) {// tableId,pageDivId,data,
	// var aa = eval("(" + c + ")");
		$(a).find("tbody").html("");
		for ( var i = 0; i < c.length; i++) {
			var tableData = "<tr>" 
					+ "<td>" + c[i].hostId + "</td>" 
					+ "<td>" + c[i].hostIp + "</td>"
					+ "<td>" + c[i].deviceSubType + "</td>" 
					+ "<td>" + c[i].deviceStatus + "</td>" 
					+ "<td>" + c[i].deviceAlarm + "</td>" 
					+ "<td>" + " " + "</td>"
					+ "<td>" + " " + "</td>"
				+ "</tr>"
			// 主页表格显示门禁等信息
			$(a).find("tbody").append(tableData);
		}
		;// 添加至表格的数据
		createPage(a, b);
	}
	;

	function createPage(e, f) {// tableId,pageDivId
		var trLength = $(e).find("tbody").find("tr").length;// 获取行数

		for ( var n = trLength; n >= 10; n--) {
			$(e).find("tbody").find("tr").eq(n).hide();
		}

		var pageCounts = Math.ceil(trLength / 10);// 页数 向上取整

		$(f).html("");

		for ( var i = 1; i <= pageCounts; i++) {
			$(f).append("<div>" + i + "</div>");// 添加页面框
		}
		;

		$(f).find("div").click(function() {
			var pageIndex = $(this).index() + 1;
			pageClick(e, pageIndex);
		});
	}
	;

	function pageClick(o, p) {// tableId

		$(o).find("tbody").find("tr").hide();// 清空tbody内容

		for ( var i = (p - 1) * 10; i <= p * 10 - 1; i++) {
			console.log(i);
			$(o).find("tbody").find("tr").eq(i).show(); // 显示该页面的内容，选择第n个来显示
		}
	}
	;
})();